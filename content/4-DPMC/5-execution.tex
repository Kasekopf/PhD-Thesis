\section{Execution Phase: Performing the Valuation}
\label{sec_execution}

The execution phase involves a CNF formula $\phi$ over variables $X$, a project-join tree $(T, r, \gamma, \pi)$ of $\phi$, and a literal-weight function $W$ over $X$.
The goal is to compute the valuation $f^W_r$ using Equation \eqref{eq_valuation}.
Several data structures can be used for the pseudo-Boolean functions that occur while using Equation \eqref{eq_valuation}.
In this work, we consider two data structures that have been applied to weighted model counting: ADDs (as in \cite{DPV20}) and tensors (as in Chapter \ref{ch:tensors}).

% Algorithm \ref{alg_jt_wmc} computes the model count of a CNF formula, employing dynamic programming as guided by a project-join tree.
% \begin{algorithm*}[H]
% \label{alg_jt_wmc}
% \caption{Model counting with a project-join tree of a CNF formula}
%     \DontPrintSemicolon
%     \KwIn{$X$: set of Boolean variables}
%     \KwIn{$\phi$: CNF formula over $X$}
%     \KwIn{$(T, r, \pi, \gamma)$: project-join tree of $\phi$}
%     \KwIn{$W$: literal-weight function over $X$}
%     \KwOut{$W(\phi)$: literal-weighted model count of $\phi$ \wrt{} $W$}
%     % \Begin{
%         \Function{\upshape $\nodeValuation(n)$}{
%             \KwIn{$n \in \V{T}$: node of project-join tree}
%             \KwOut{$f^W_n$: $W$-valuation of $n$}
%             % \Begin{
%                 \If{$n \in \Lv{T}$}{
%                     \Return{\upshape corresponding clause $\gamma(n) \in \phi$}
%                 }
%                 \Else{
%                     $P \gets \pi(n)$
%                         \tcc*{variables to project}
%                     \Return{$\sum_{P} \pars{ \prod_{o \in \C(n)} f^W_o \mult \prod_{x \in P} W_x }$}\;
%                 }
%             % }
%         }
%         \Return{\upshape $\nodeValuation(r)(\emptyset)$}
%             \tcc*{$\nodeValuation(r) : 2^\emptyset \to \R$}
%     % }
% \end{algorithm*}
% Note that Algorithm \ref{alg_jt_wmc} can be implemented with different data structures.
% For example, the pseudo-Boolean functions $\gamma(n)$, $f^W_n$, and $W_x$ can be represented by algebraic decision diagrams or tensors.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\input{content/4-DPMC/5.1-ADDs}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\input{content/4-DPMC/5.2-tensors}
